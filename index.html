<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scouting App Results</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .form-container {
            margin-bottom: 20px;
        }
        .filter-container {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

<h2>Pre Game</h2>

<form id="scoutingForm">
    <div class="form-container">
        <label for="name">What is your name:</label>
        <input type="text" id="name" name="name" required><br><br>
    </div>

    <div class="form-container">
        <label for="matchNumber">Match Number:</label>
        <input type="number" id="matchNumber" name="matchNumber" min="0" max="100" required><br><br>
    </div>

    <div class="form-container">
        <label for="teamNumber">Team Number:</label>
        <input type="number" id="teamNumber" name="teamNumber" min="0" max="100" required><br><br>
    </div>

    <div class="form-container">
        <label for="teamColor">Team Color:</label><br>
        <label>
            <input type="radio" id="blue" name="teamColor" value="Blue" required> Blue
        </label><br>
        <label>
            <input type="radio" id="red" name="teamColor" value="Red" required> Red
        </label><br><br>
    </div>
    

    <h1>Auto</h1>

    <div class="form-container">
        <label>Coral level scored on:</label><br>
        <label>
            <input type="checkbox" id="level1" name="coralLevel" value="Level 1"> Level 1
        </label><br>
        <label>
            <input type="checkbox" id="level2" name="coralLevel" value="Level 2"> Level 2
        </label><br>
        <label>
            <input type="checkbox" id="level3" name="coralLevel" value="Level 3"> Level 3
        </label><br>
        <label>
            <input type="checkbox" id="level4" name="coralLevel" value="Level 4"> Level 4
        </label><br>
        <input type="checkbox" id="None" name="teleopCoralLevel" value="None"> None
        </label><br><br>
    </div>


    <div class="form-container">
        <label for="passAutoLine">Pass Auto Line for ranking point:</label><br>
        <label>
            <input type="radio" id="yes" name="passAutoLine" value="Yes" required> Yes
        </label><br>
        <label>
            <input type="radio" id="no" name="passAutoLine" value="No" required> No
        </label><br><br>
    </div>
    
<h2>TeleOp</h2>

    <div class="form-container">
        <label>Coral level scored on:</label><br>
        <label>
            <input type="checkbox" id="teleopLevel1" name="teleopCoralLevel" value="Level 1"> Level 1
        </label><br>
        <label>
            <input type="checkbox" id="teleopLevel2" name="teleopCoralLevel" value="Level 2"> Level 2
        </label><br>
        <label>
            <input type="checkbox" id="teleopLevel3" name="teleopCoralLevel" value="Level 3"> Level 3
        </label><br>
        <label>
            <input type="checkbox" id="teleopLevel4" name="teleopCoralLevel" value="Level 4"> Level 4
        </label><br>
        <input type="checkbox" id="None" name="teleopCoralLevel" value="None"> None
        </label><br><br>
    </div>



    <div class="form-container">
        <label for="algaeRemoved">Algae Removed:</label><br>
        <input type="number" id="algaeRemoved" name="algaeRemoved" min="0" required><br><br>
        <label for="algaescoredinnet">Algae scored in net:</label><br>
        <input type="number" id="algaescoredinnet" name="algaescoredinnet" min="0" required><br><br>
        <label for="algaeInProcessor">Algae scored in processor:</label><br>
        <input type="number" id="algaeInProcessor" name="algaeInProcessor" min="0" required><br><br>
    </div>

    
    
    <div class="form-container">
        <label>Can move algae:</label><br>
        <label> 
        <input type="radio" id="Yes" name="canMoveAlgae" value="Yes"> Yes
        </label><br>
        <label> 
        <input type="radio" id="No" name="canMoveAlgae" value="No"> No
        </label><br><br>
    </div>

    <div class="form-container">
        <label>How do they get game pieces:</label><br>
        <label>
            <input type="checkbox" id="source" name="algaeNet" value="Source"> Source
        </label><br>
        <label>
            <input type="checkbox" id="ground" name="algaeNet" value="Ground"> Ground
        </label><br>
        <input type="checkbox" id="None" name="algaeNet" value="None"> None
        </label><br><br>
    </div>

    <h1>End</h1>

        <div class="form-container">
            <label>Climb:</label><br>
            <label>
                <input type="radio" id="park" name="climb" value="Park"> Park
            </label><br>
            <label>
                <input type="radio" id="shallowCage" name="climb" value="Shallow Cage"> Shallow Cage
            </label><br>
            <label>
                <input type="radio" id="deepCage" name="climb" value="Deep Cage"> Deep Cage
            </label><br>
            <label>
                <input type="radio" id="None" name="climb" value="None"> None
            </label><br><br>
        </div>
        

    <h1>Outcome</h1>

    <div class="form-container">
        <label>Outcome:</label><br>
        <label>
            <input type="radio" id="win" name="outcome" value="Win"> Win
        </label><br>
        <label>
            <input type="radio" id="tie" name="outcome" value="Tie"> Tie
        </label><br>
        <label>
            <input type="radio" id="lose" name="outcome" value="Lose"> Lose
        </label><br><br>
    </div>

    <div class="form-container">
        <label>Was the Cooperation point scored:</label><br>
        <label>
            <input type="radio" name="cooperationPoint" value="Yes" required> Yes
        </label><br>
        <label>
            <input type="radio" name="cooperationPoint" value="No"> No
        </label><br><br>
    </div>



    <div class="form-container">
        <label>Barge RP Scored:</label><br>
        <label>
            <input type="radio" name="bargeRP" value="Yes" required> Yes
        </label><br>
        <label>
            <input type="radio" name="bargeRP" value="No"> No
        </label><br><br>
    </div>

    <div class="form-container">
        <label>Coral RP Scored:</label><br>
        <label>
            <input type="radio" name="coralRP" value="Yes" required> Yes
        </label><br>
        <label>
            <input type="radio" name="coralRP" value="No"> No
        </label><br><br>
    </div>

    <div class="form-container">
        <label for="message">Any other helpful information:</label><br>
        <textarea id="message" name="message" rows="4" cols="50" placeholder="If not, leave blank"></textarea><br><br>
    </div>

    <input type="submit" value="Submit">
</form>

<h1>Survey Results</h1>

<!-- Filter inputs to filter the table -->
<div class="filter-container">
    <label for="teamFilter">Filter by Team Number:</label>
    <input type="number" id="teamFilter" onkeyup="filterTable()"><br><br>

    <label for="matchFilter">Filter by Match Number:</label>
    <input type="number" id="matchFilter" onkeyup="filterTable()"><br><br>
</div>


<table id="resultsTable">
    <thead>
        <tr>
            <th>Name</th>
            <th>Match Number</th>
            <th>Team Number</th>
            <th>Team Color</th>
            <th>Coral Level</th>
            <th>Pass Auto Line</th>
            <th>Algae Removed</th>
            <th>Can Move Algae</th>
            <th>Climb</th>
            <th>Outcome</th>
            <th>Cooperation Point</th>
            <th>Barge RP</th>
            <th>Coral RP</th>
            <th>Message</th>
        </tr>
    </thead>
    <tbody>
        <!-- Survey results will go here -->
    </tbody>
</table>



<script>
    // On page load, check if there's saved data in localStorage and populate the table
    window.onload = function() {
        const savedData = JSON.parse(localStorage.getItem("surveyResults"));
        if (savedData) {
            const table = document.getElementById("resultsTable").getElementsByTagName('tbody')[0];
            savedData.forEach(data => {
                const newRow = table.insertRow();
                newRow.innerHTML = `
                    <td>${data.name}</td>
                    <td>${data.matchNumber}</td>
                    <td>${data.teamNumber}</td>
                    <td>${data.teamColor}</td>
                    <td>${data.coralLevel}</td>
                    <td>${data.passAutoLine}</td>
                    <td>${data.algaeRemoved}</td>
                    <td>${data.canMoveAlgae}</td>
                    <td>${data.climb}</td>
                    <td>${data.outcome}</td>
                    <td>${data.cooperationPoint}</td>
                    <td>${data.bargeRP}</td>
                    <td>${data.coralRP}</td>
                    <td>${data.message}</td>
                `;
            });
        }
    };

    // Collect form data and insert it into the table
    document.getElementById("scoutingForm").onsubmit = function(event) {
        event.preventDefault(); // Prevent form submission

        const name = document.getElementById("name").value;
        const matchNumber = document.getElementById("matchNumber").value;
        const teamNumber = document.getElementById("teamNumber").value;
        const teamColor = document.querySelector('input[name="teamColor"]:checked').value;
        const coralLevel = Array.from(document.querySelectorAll('input[name="coralLevel"]:checked')).map(input => input.value).join(", ");
        const passAutoLine = document.querySelector('input[name="passAutoLine"]:checked').value;
        const algaeRemoved = document.getElementById("algaeRemoved").value;
        const canMoveAlgae = document.querySelector('input[name="canMoveAlgae"]:checked').value;
        const climb = document.querySelector('input[name="climb"]:checked').value;
        const outcome = document.querySelector('input[name="outcome"]:checked').value;
        const cooperationPoint = document.querySelector('input[name="cooperationPoint"]:checked').value;
        const bargeRP = document.querySelector('input[name="bargeRP"]:checked').value;
        const coralRP = document.querySelector('input[name="coralRP"]:checked').value;
        const message = document.getElementById("message").value;

        // Create an object for the new data
        const newEntry = {
            name, matchNumber, teamNumber, teamColor, coralLevel, passAutoLine, algaeRemoved, 
            canMoveAlgae, climb, outcome, cooperationPoint, bargeRP, coralRP, message
        };

        // Insert the new row into the table
        const table = document.getElementById("resultsTable").getElementsByTagName('tbody')[0];
        const newRow = table.insertRow();
        newRow.innerHTML = `
            <td>${name}</td>
            <td>${matchNumber}</td>
            <td>${teamNumber}</td>
            <td>${teamColor}</td>
            <td>${coralLevel}</td>
            <td>${passAutoLine}</td>
            <td>${algaeRemoved}</td>
            <td>${canMoveAlgae}</td>
            <td>${climb}</td>
            <td>${outcome}</td>
            <td>${cooperationPoint}</td>
            <td>${bargeRP}</td>
            <td>${coralRP}</td>
            <td>${message}</td>
        `;

        // Save the new data to localStorage
        const allData = JSON.parse(localStorage.getItem("surveyResults")) || [];
        allData.push(newEntry);
        localStorage.setItem("surveyResults", JSON.stringify(allData));
    };

    // Filter the table based on team number and match number
    function filterTable() {
        const teamFilter = document.getElementById("teamFilter").value.toLowerCase();
        const matchFilter = document.getElementById("matchFilter").value.toLowerCase();
        const rows = document.getElementById("resultsTable").getElementsByTagName("tr");

        for (let i = 1; i < rows.length; i++) {
            const cells = rows[i].getElementsByTagName("td");
            const teamNumber = cells[2].textContent.toLowerCase();
            const matchNumber = cells[1].textContent.toLowerCase();

            if (teamNumber.includes(teamFilter) && matchNumber.includes(matchFilter)) {
                rows[i].style.display = "";
            } else {
                rows[i].style.display = "none";
            }
        }
    }
</script>
  
<script>
    // Collect form data and send it to Google Sheets via Apps Script
    document.getElementById("scoutingForm").onsubmit = function(event) {
        event.preventDefault(); // Prevent form submission

        // Collect the data
        const name = document.getElementById("name").value;
        const matchNumber = document.getElementById("matchNumber").value;
        const teamNumber = document.getElementById("teamNumber").value;
        const teamColor = document.querySelector('input[name="teamColor"]:checked').value;
        const coralLevel = Array.from(document.querySelectorAll('input[name="coralLevel"]:checked')).map(input => input.value).join(", ");
        const passAutoLine = document.querySelector('input[name="passAutoLine"]:checked').value;
        const algaeRemoved = document.getElementById("algaeRemoved").value;
        const canMoveAlgae = document.querySelector('input[name="canMoveAlgae"]:checked').value;
        const climb = document.querySelector('input[name="climb"]:checked').value;
        const outcome = document.querySelector('input[name="outcome"]:checked').value;
        const cooperationPoint = document.querySelector('input[name="cooperationPoint"]:checked').value;
        const bargeRP = document.querySelector('input[name="bargeRP"]:checked').value;
        const coralRP = document.querySelector('input[name="coralRP"]:checked').value;
        const message = document.getElementById("message").value;

        // Create an object for the new data
        const formData = {
            name, matchNumber, teamNumber, teamColor, coralLevel, passAutoLine, algaeRemoved, 
            canMoveAlgae, climb, outcome, cooperationPoint, bargeRP, coralRP, message
        };

        // Send the data to Google Sheets via Google Apps Script Web App
        fetch('https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData),
        })
        .then(response => response.text())
        .then(data => {
            alert('Data saved successfully');
        })
        .catch(error => {
            console.error('Error:', error);
            alert('There was an error saving the data');
        });
    };
</script>

